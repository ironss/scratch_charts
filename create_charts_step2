
SQLITE3=/usr/bin/sqlite3

addlayer () 
{

echo "$1 $2"

(
cat <<EOF
BEGIN TRANSACTION;
EOF

$SQLITE3 $1/OruxMapsImages.db .d | 
grep "INSERT INTO \"tiles\" VALUES([[:digit:]]\+,[[:digit:]]\+,$2"

cat <<EOF
COMMIT;
EOF

) | $SQLITE3 OruxMapsImages.db

}




rm OruxMapsImages.db

(cat <<EOF
PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE tiles (x int, y int, z int, image blob, PRIMARY KEY (x,y,z));
COMMIT;
EOF
) | $SQLITE3 OruxMapsImages.db



addlayer NZ63      12
addlayer NZ632     13
addlayer NZ632     14
addlayer NZ6321    15
addlayer NZ6321_1  16
addlayer NZ6321_1  17
#addlayer NZ6324    15
#addlayer NZ6324_1  16
addlayer NZ64       8
addlayer NZ64       9
addlayer NZ64      10
addlayer NZ64      11

(
cat <<EOF
BEGIN TRANSACTION;
CREATE TABLE android_metadata (locale TEXT);
INSERT INTO "android_metadata" VALUES('en_NZ');
CREATE INDEX IND on tiles (x,y,z);
COMMIT;
EOF

) | $SQLITE3 OruxMapsImages.db

